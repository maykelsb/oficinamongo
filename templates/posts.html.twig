{% extends 'base.html.twig' %}
{% block main %}
  {% include 'partials/post.html.twig' with { 'posts': posts } %}
  {% include 'partials/modals/shout.html.twig' %}
  {% include 'partials/modals/pitaco.html.twig' %}
{% endblock %}
{% block javascript %}
$('.btn-salvar-post').click(function(){
    $('#form-novo-post').submit();
});
$('.btn-novo-pitaco').click(function(){
    $('#postid').val($(this).attr('data-postid'));
    $('#novo-pitaco').modal();
});
$('.btn-salvar-pitaco').click(function(){
    $('#form-novo-pitaco').submit();
});
$('.btn-like').click(function(){
    var postid = $(this).attr('data-postid');
    $.post('?action=like', {'data[postid]': postid}, function(data){
        $('#likes_' + postid).text(data.likes);
    }, 'json').fail(function(){
        bootbox.alert('Não foi possível completar a requisição');
    });
});
$('.top10-comments').click(function(){
    $.get('?action=top10-pitacados', {}, function(html){
        bootbox.dialog({
            title: '<span class="glyphicon glyphicon-comment"></span> Mais pitacados',
            message: html,
            size: 'large',
            buttons: {
                main: {
                    label: 'Fechar',
                    className: 'btn-danger',
                }
            },
        });
    
    }, 'html').fail(function(){
        bootbox.alert('Não foi possível completar a requisição');
    });
});
$('.top10-likes').click(function(){
    $.get('?action=top10-likes', {}, function(html){
        bootbox.dialog({
            title: '<span class="glyphicon glyphicon-thumbs-up"></span> Mais curtidos',
            message: html,
            size: 'large',
            buttons: {
                main: {
                    label: 'Fechar',
                    className: 'btn-danger',
                }
            },
        });
    
    }, 'html').fail(function(){
        bootbox.alert('Não foi possível completar a requisição');
    });
});
{% endblock %}